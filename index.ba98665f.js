function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},s=t.parcelRequire7599;null==s&&((s=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return o[e]=s,t.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequire7599=s),s("kyEFX").register(JSON.parse('{"5ZPII":"index.ba98665f.js","8OQ7p":"icons.4c16bf73.svg","836Hl":"amazon@1x.079940f4.png","kCfmF":"amazon@2x.9519639f.png","eGo9w":"book@1x.4bca86b0.png","1NmpU":"book@2x.f258df53.png","lf6jX":"books@1x.d21f8dfc.png","9NT6S":"books@2x.2abcb86b.png","5UbS1":"index.adbbe5e0.css","xwhNR":"index.73ea67ae.js"}')),s("fPYYr");var i,r=s("3bbpN"),a=s("eyjy7");i=new URL(s("kyEFX").resolve("8OQ7p"),import.meta.url).toString();document.querySelector(".button-sing-auth-js").addEventListener("click",v);const l=new(0,r.DataFirebase);async function c(){await l.authGoogle(),d.innerHTML="",document.body.classList.remove("scroll-off"),E()}const u=l.auth,d=document.querySelector(".modalWindow"),m=document.querySelector(".burger-menu-header"),f=document.querySelector(".modal-burger-menu");m.addEventListener("click",(()=>{f.classList.toggle("modal-burger-menu-off"),m.classList.toggle("active"),document.body.classList.toggle("scroll-off")}));const p=document.querySelector(".burger-button-auth"),g=document.querySelector(".burger-button-span");function b(){console.log(localStorage.getItem("tokenResponse")),localStorage.getItem("tokenResponse")?g.innerHTML="Log aut":g.innerHTML="Log in"}function v(){if(localStorage.getItem("tokenResponse"))return localStorage.removeItem("tokenResponse"),localStorage.removeItem("userAvatar"),localStorage.removeItem("email"),localStorage.removeItem("shopingList"),void E();d.innerHTML='\n    <div class="modal-bakc">\n    <form class="modal-form-auth"">\n    <div class=\'clousModalAuth\'>&times;</div>\n    <input\n      type="email"\n      name="email"\n      placeholder="email"\n    />\n    <input\n      type="password"\n      name="password"\n      placeholder="password"\n    />\n    <button type="submit">Sign in</button>\n    <div class=\'button-sing-group\'>\n    <p class="button-sign-up">Sign up</p>\n    <p class=\'button-sing\'>Sign in</p>\n    <p class=\'button-google\'>google</p>\n    </div>\n  </form>\n  </div>';const e=d.querySelector(".modal-form-auth"),t=e.querySelector(".button-sign-up"),o=e.querySelector(".button-google"),n=e.querySelector(".clousModalAuth");t.addEventListener("click",y),o.addEventListener("click",c),e.addEventListener("submit",h),n.addEventListener("click",k),d.classList.add("trans-modal"),document.body.classList.add("scroll-off"),b()}async function h(e){e.preventDefault();const t=e.currentTarget.elements.email.value,o=e.currentTarget.elements.password.value;try{const e=await(0,a.signInWithEmailAndPassword)(u,t,o);localStorage.setItem("tokenResponse",e._tokenResponse.idToken),localStorage.setItem("email",t),d.innerHTML="",document.body.classList.remove("scroll-off");const n=await l.getRequest(t);if(n){const e=JSON.stringify(n);localStorage.setItem("shopingList",e)}else localStorage.setItem("shopingList",JSON.stringify({}))}catch(e){console.error("fire.data-error",e),alert(e.message)}E()}function y(){d.innerHTML='\n    <div class="modal-bakc">\n    <form class="modal-form-auth">\n    <div class=\'clousModalAuth\'>&times;</div>\n    <input\n      type="email"\n      name="email"\n      placeholder="email"\n    />\n    <input\n      type="password"\n      name="password"\n      placeholder="password"\n    />\n    <input\n      type="password"\n      name="passwordConfirmation"\n      placeholder="password"\n    />\n    <button type="submit">sign up</button>\n    <div class=\'button-sing-group\'>\n    <p class=\'button-sing\'>Sign up</p>\n    <p class="button-sign-in">Sign in</p>\n    <p class=\'button-google\'>google</p>\n    </div>\n  </form>\n  </div>';const e=d.querySelector(".modal-form-auth"),t=e.querySelector(".button-sign-in"),o=e.querySelector(".button-google"),n=e.querySelector(".clousModalAuth");d.classList.add("trans-modal"),t.addEventListener("click",v),e.addEventListener("submit",L),o.addEventListener("click",c),n.addEventListener("click",k),document.body.classList.add("scroll-off")}function k(){d.classList.remove("trans-modal"),d.innerHTML="",document.body.classList.remove("scroll-off")}async function L(e){e.preventDefault();const t=e.currentTarget.elements.email.value,o=e.currentTarget.elements.password.value,n=e.currentTarget.elements.passwordConfirmation.value;if(o&&o===n){console.log(t,o),d.innerHTML="",document.body.classList.remove("scroll-off");try{const e=await(0,a.createUserWithEmailAndPassword)(u,t,o);localStorage.setItem("tokenResponse",e._tokenResponse.idToken),localStorage.setItem("email",t),localStorage.setItem("shopingList",JSON.stringify({}))}catch(e){console.error(e.message),alert(e.message)}}else alert("Check the password");E()}p.addEventListener("click",(function(e){m.classList.toggle("active"),f.classList.toggle("modal-burger-menu-off"),document.body.classList.toggle("scroll-off"),v()})),b(),b();const S=document.querySelector(".header-button-nav"),w=document.querySelector(".button-sing-auth-js");function E(){let t="";if(localStorage.getItem("tokenResponse")){const o=localStorage.getItem("userAvatar")?localStorage.getItem("userAvatar"):"https://bootstraptema.ru/snippets/icons/2016/mia/1.png",n=localStorage.getItem("email");t=`<div class='user-auth-zone'>\n        <img\n          src="${o}"\n          alt="user avatar"\n          loading="lazy"\n          class="user-img-auth"\n        />\n      <span class='nik-name'>${n.substring(0,n.indexOf("@"))}</span>\n        <div class='svg-user-auth'>\n        <svg width="23" height="26" fill="#ffffff">\n          <use href="${e(i)}#caret-down"></use>\n        </svg>\n        </div>\n    </div>`,S.classList.remove("header-not-uyth")}else t=`<div class="button-sing-auth-js">\n      <button class="btn-log-out" type="button">\n        Log in<span class="btn-icn-wrap">\n          <svg width="20" height="20">\n            <use href="${e(i)}#arrow-right"></use>\n          </svg>\n        </span>\n      </button>\n    </div>`,S.classList.add("header-not-uyth");w.innerHTML=t}E();var x,T=s("fPYYr");T=s("fPYYr"),r=s("3bbpN");x=new URL(s("kyEFX").resolve("836Hl"),import.meta.url).toString();var _;_=new URL(s("kyEFX").resolve("kCfmF"),import.meta.url).toString();var $;$=new URL(s("kyEFX").resolve("eGo9w"),import.meta.url).toString();var q;q=new URL(s("kyEFX").resolve("1NmpU"),import.meta.url).toString();var H;H=new URL(s("kyEFX").resolve("lf6jX"),import.meta.url).toString();var j;j=new URL(s("kyEFX").resolve("9NT6S"),import.meta.url).toString();const A=new(0,r.DataFirebase);let R=null;async function I(t){const o=null!==localStorage.getItem("email"),n=t,s=await T.axiosApiBooks.fetchBookInfo(n);R=n;const i=document.querySelector(".backdrop");i.classList.remove("is-hidden");document.querySelector(".modal").addEventListener("click",(e=>{e.stopPropagation()})),o&&function(){const e=document.querySelector('[data-name="order-btn"]'),t=document.querySelector(".text-input"),o=JSON.parse(localStorage.getItem("shopingList"));Object.keys(o).includes(R)?(e.textContent="remove from the shopping list",e.classList.add("btn-shop-list-modal-remove"),e.classList.remove("btn-shop-list-modal-add"),t.innerHTML="<p class='text-remove-btn'> Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>"):(e.textContent="Add to shopping list",e.classList.add("btn-shop-list-modal-add"),e.classList.remove("btn-shop-list-modal-remove"),t.innerHTML="")}(),document.body.style.overflow="hidden",i.addEventListener("click",c),window.document.addEventListener("keydown",(e=>{"Escape"===e.key&&c()}));document.querySelector(".close-btn ").addEventListener("click",c);const r=document.querySelector('[data-name="order-btn"]');r.addEventListener("click",u);const a=document.querySelector(".book-information"),l=function({book_image:t,title:o,author:n,description:s,buy_links:i}){const r=i[0].url,a=i[1].url,l=i[3].url;return`\n      <img class='book_modal-book-img' src="${t||"./src/images/stopper335@1x.png"}" alt='Book image'>\n    <div class='book_modal-book-descr-inf'>\n    <p class='book_modal-book-title'>${o||"No title."}</p>\n    <p class='book_modal-book-author'>${n||"No author."}</p>\n    <p class='book_modal-book-description'>${s||"No description."}</p>\n    <ul class='book_modal-links-group'>\n    <li class='book_modal-links'><a href=${r} target="_blank" rel="nofollow noopener noreferrer"> <img  src='${e(x)}' srcset="${e(x)} 1x, ${e(_)} 2x" alt ='Amazon Icon'></a></li>\n    <li class='book_modal-links'><a href=${a} target="_blank" rel="nofollow noopener noreferrer"> <img  src='${e($)}' srcset="${e($)} 1x, ${e(q)} 2x" alt ='Apple Icon'></a></li>\n    <li class='book_modal-links'><a href=${l} target="_blank" rel="nofollow noopener noreferrer"> <img  src='${e(H)}' srcset="${e(H)} 1x, ${e(j)} 2x" alt ='Book Shop Icon'></a></li>\n    </ul>\n    </div>\n       `}(s);function c(){i.classList.add("is-hidden"),a.innerHTML="",r.removeEventListener("click",u),document.body.style.overflow=""}function u(e){const t=document.querySelector(".text-input");r.classList.value.includes("btn-shop-list-modal-remove")?(A.deleteBook(n),r.textContent="Add to shopping list",r.classList.add("btn-shop-list-modal-add"),r.classList.remove("btn-shop-list-modal-remove"),t.innerHTML=""):(r.textContent="remove from the shopping list",r.classList.add("btn-shop-list-modal-remove"),t.innerHTML="<p class='text-remove-btn'> Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>",A.addBookk(n))}a.innerHTML=l}var M=s("iQIUW"),O={};Object.defineProperty(O,"__esModule",{value:!0}),O.default=function(e,t,o){t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o;return e};const N=new class{show(){this.spinnerEl.classList.remove("is-hidden")}hide(){this.spinnerEl.classList.add("is-hidden")}getEl(){return this.spinnerEl}constructor(){e(O)(this,"spinnerEl",document.querySelector(".spinner-js"))}};var F,C=/^\s+|\s+$/g,B=/^[-+]0x[0-9a-f]+$/i,U=/^0b[01]+$/i,W=/^0o[0-7]+$/i,D=parseInt,P="object"==typeof t&&t&&t.Object===Object&&t,Y="object"==typeof self&&self&&self.Object===Object&&self,X=P||Y||Function("return this")(),z=Object.prototype.toString,J=Math.max,G=Math.min,Q=function(){return X.Date.now()};function V(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Z(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==z.call(e)}(e))return NaN;if(V(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=V(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(C,"");var o=U.test(e);return o||W.test(e)?D(e.slice(2),o?2:8):B.test(e)?NaN:+e}function K(e){I(e)}F=function(e,t,o){var n,s,i,r,a,l,c=0,u=!1,d=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var o=n,i=s;return n=s=void 0,c=t,r=e.apply(i,o)}function p(e){return c=e,a=setTimeout(b,t),u?f(e):r}function g(e){var o=e-l;return void 0===l||o>=t||o<0||d&&e-c>=i}function b(){var e=Q();if(g(e))return v(e);a=setTimeout(b,function(e){var o=t-(e-l);return d?G(o,i-(e-c)):o}(e))}function v(e){return a=void 0,m&&n?f(e):(n=s=void 0,r)}function h(){var e=Q(),o=g(e);if(n=arguments,s=this,l=e,o){if(void 0===a)return p(l);if(d)return a=setTimeout(b,t),f(l)}return void 0===a&&(a=setTimeout(b,t)),r}return t=Z(t)||0,V(o)&&(u=!!o.leading,i=(d="maxWait"in o)?J(Z(o.maxWait)||0,t):i,m="trailing"in o?!!o.trailing:m),h.cancel=function(){void 0!==a&&clearTimeout(a),c=0,n=l=s=a=void 0},h.flush=function(){return void 0===a?r:v(Q())},h};const ee={bestsellersSectionEl:document.querySelector(".bookshelf"),categoriesListEl:document.querySelector(".categories-list"),allCategoriesTitleEl:document.querySelector(".cat-list"),bestsellersButton:document.querySelector(".bestsellers-button")};function te(e){return e.map((({_id:e,book_image:t,author:o,title:n})=>`<li class="book-item" data-id="${e}">\n      <div class="bookshelf-bool-link">\n    <div class="book-img-container">\n    <div class="book-shoppingcart is-hidden"></div>\n     <img class="book-img" loading="lazy" src="${t}" alt="${n}"  width="180px" height="256px"/>\n     <div class="books-overlay">\n     <p class="books-overlay-text">quick view\n     </p>\n     </div>\n     </div>\n     <p class="book-title">${n}</p>\n        <p class="author-name">${o}</p>\n        </div>\n        </li>`)).join("")}async function oe(){try{N.show();const e=await T.axiosApiBooks.fetchTopBooks();if(!e||0===e.length)return void M.Notify.failure("Sorry, we didn't find anything according to your request.");await async function(e){const t=e.map((async({list_name:e,books:t})=>`\n        <div class="bestsellers-category-item">\n        <p class="bestsellers-category-name" name="${e}">${e}</p>\n        <ul class="bestsellers-book-list open-js">\n        ${await te(t)}\n        </ul>\n        <div class="bestsellers-button-container">\n        <button type="button" class="bestsellers-button" name="${e}">see more</button>\n        </div>\n        </div>`)),o=(await Promise.all(t)).join("");ee.bestsellersSectionEl.innerHTML=`\n    <h2 class="bestsellers-title">${ne("Best Sellers Books")}</h2>\n    ${o}`,document.querySelector(".bookshelf").addEventListener("click",(e=>{e.target.closest("li")&&K(e.target.closest("li").dataset.id)})),ie()}(e),N.hide()}catch(e){console.log(e.message)}}function ne(e){if(!e)return"";const t=e.trim().split(" "),o=t.pop();return`${t.join(" ")} <span class="categories-title-last-word">${o}</span>`}function se(e,t){const o=`\n    <h2 class="bestsellers-title">${ne(t)}</h2>\n    <div class="bestsellers-category-item" name="${t}">\n      <ul class="category-book-list open-js">${te(e)}</ul>\n    </div>\n  `;ee.bestsellersSectionEl.innerHTML=o;document.querySelector(".bookshelf").addEventListener("click",(e=>{e.target.closest("li")&&K(e.target.closest("li").dataset.id)}))}function ie(){const e=document.querySelectorAll(".bestsellers-book-list"),t={mobile:{index:0,count:1},tablet:{index:0,count:3},desktop:{index:0,count:1/0}};let o;o=window.innerWidth<768?t.mobile:window.innerWidth<1440?t.tablet:t.desktop,e.forEach((e=>{for(let t=0;t<e.children.length;t++)e.children[t].hidden=t<o.index||t>=o.index+o.count}))}if(window.addEventListener("DOMContentLoaded",oe),ee.allCategoriesTitleEl.addEventListener("click",oe),ee.bestsellersSectionEl.addEventListener("click",(async function(e){if(!e.target.classList.contains("bestsellers-button"))return;const{name:t}=e.target;N.show(),window.innerWidth<1440&&re(ee.bestsellersSectionEl);try{const e=await T.axiosApiBooks.fetchSelectedCategory(t);if(!e||0===e.length)return void M.Notify.failure("Sorry, we didn't find anything according to your request.");const o=function(e){const t=document.querySelector(".upper-case");t&&t.classList.remove("upper-case");document.querySelector(`li[name="${e}"]`).classList.add("upper-case")}(t),n=ne(o);document.querySelector(".bestsellers-title").innerHTML=n,se(e,t),N.hide()}catch(e){console.log(e.message)}})),ee.categoriesListEl.addEventListener("click",(async function(e){const{nodeName:t,textContent:o}=e.target;if("LI"!==t||"All categories"===o.trim())return;N.show();try{const e=await T.axiosApiBooks.fetchSelectedCategory(o);if(!e||0===e.length)return void M.Notify.failure("Sorry, we didn't find anything according to your request.");document.querySelector(".bestsellers-title").innerHTML=o,se(e,o),N.hide()}catch(e){console.log(e.message)}})),window.addEventListener("resize",e(F)(ie,300)),window.innerWidth<768){const e=document.querySelector('li[data-name="All categories"]');e&&e.classList.add("cat-list--fixed")}function re(e,t="start"){e.scrollIntoView({behavior:"smooth",position:t})}T=s("fPYYr");ee.categoriesListEl.addEventListener("click",(async function(e){const{target:t}=e;if(!t.classList.contains("cat-list"))return;const{textContent:o,closest:n}=t,s=n.call(t,".cat-list"),i=document.querySelector(".cat-list.upper-case");i&&i.classList.remove("upper-case");if(s.classList.add("upper-case"),"All categories"===o)return void await T.axiosApiBooks.fetchTopBooks();await T.axiosApiBooks.fetchSelectedCategory(o),window.innerWidth<1440&&re(ee.bestsellersSectionEl)})),async function(){const e=await T.axiosApiBooks.fetchCategoryList();e.sort(((e,t)=>e.list_name.localeCompare(t.list_name)));const t=e.map((({list_name:e})=>`<li class="cat-list cat-text" name="${e}">${e}</li>`)).join("");ee.categoriesListEl.insertAdjacentHTML("beforeend",t)}();var ae,le=/^\s+|\s+$/g,ce=/^[-+]0x[0-9a-f]+$/i,ue=/^0b[01]+$/i,de=/^0o[0-7]+$/i,me=parseInt,fe="object"==typeof t&&t&&t.Object===Object&&t,pe="object"==typeof self&&self&&self.Object===Object&&self,ge=fe||pe||Function("return this")(),be=Object.prototype.toString,ve=Math.max,he=Math.min,ye=function(){return ge.Date.now()};function ke(e,t,o){var n,s,i,r,a,l,c=0,u=!1,d=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var o=n,i=s;return n=s=void 0,c=t,r=e.apply(i,o)}function p(e){return c=e,a=setTimeout(b,t),u?f(e):r}function g(e){var o=e-l;return void 0===l||o>=t||o<0||d&&e-c>=i}function b(){var e=ye();if(g(e))return v(e);a=setTimeout(b,function(e){var o=t-(e-l);return d?he(o,i-(e-c)):o}(e))}function v(e){return a=void 0,m&&n?f(e):(n=s=void 0,r)}function h(){var e=ye(),o=g(e);if(n=arguments,s=this,l=e,o){if(void 0===a)return p(l);if(d)return a=setTimeout(b,t),f(l)}return void 0===a&&(a=setTimeout(b,t)),r}return t=Se(t)||0,Le(o)&&(u=!!o.leading,i=(d="maxWait"in o)?ve(Se(o.maxWait)||0,t):i,m="trailing"in o?!!o.trailing:m),h.cancel=function(){void 0!==a&&clearTimeout(a),c=0,n=l=s=a=void 0},h.flush=function(){return void 0===a?r:v(ye())},h}function Le(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Se(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==be.call(e)}(e))return NaN;if(Le(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Le(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(le,"");var o=ue.test(e);return o||de.test(e)?me(e.slice(2),o?2:8):ce.test(e)?NaN:+e}ae=function(e,t,o){var n=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Le(o)&&(n="leading"in o?!!o.leading:n,s="trailing"in o?!!o.trailing:s),ke(e,t,{leading:n,maxWait:t,trailing:s})};const we=document.querySelector(".scroll-up"),Ee=document.querySelector(".scroll-up__svg-path"),xe=Ee.getTotalLength();Ee.style.strokeDasharray=`${xe} ${xe}`,Ee.style.transition="stroke-dashoffset 20ms";const Te=()=>window.pageYOffset||document.documentElement.scrollTop;window.addEventListener("scroll",e(ae)((()=>{(()=>{const e=document.documentElement.scrollHeight-window.innerHeight,t=xe-Te()*xe/e;Ee.style.strokeDashoffset=t})(),Te()>100?we.classList.add("scroll-up--active"):we.classList.remove("scroll-up--active")}),50)),we.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),s("7V6RO"),s("2wbaf"),s("195At");
//# sourceMappingURL=index.ba98665f.js.map
