function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},s={},r=n.parcelRequire7599;null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in s){var t=s[e];delete s[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){s[e]=t},n.parcelRequire7599=r),r.register("kyEFX",(function(t,n){var o,s;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return s}),(function(e){return s=e}));var r={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)r[t[n]]=e[t[n]]},s=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r.register("jJ57b",(function(e,n){var o=r("jrD5E"),s=r("79MCx"),a=r("dfaMw"),i=r("4U7uB"),l=r("9nBfi"),c=r("1RUw1"),d=r("bJ7GI");const u=new(0,r("3bbpN").DataFirebase),g={shopListContainer:document.querySelector(".shop-list__container"),container:document.querySelector(".shop-list__empty-page"),cards:document.querySelector(".shop-list__cards")},p=JSON.parse(localStorage.getItem("shopingList"));let m=[];if(!p)return;{const e=Object.keys(p);m=e.map((e=>p[e]))}!function(){m||(g.cards.classList.add("visually-hidden"),g.container.innerHTML='\n  <div class="shop-list__empty-page">\n  <p class="textEmptyPage">\n    This page is empty, add some books and proceed to order.\n  </p>\n  <img class="imgEmptyPage" src="./images/is-empty@2x.png" alt="" />\n</div>');m.length>=1&&(g.container.remove(".shop-list__empty-page"),function(e){g.cards.classList.remove("visually-hidden");const n=e.map((({id:e,bookImg:n,author:r,title:u,description:g,listName:p,buyLinks:m})=>{let f="",b="",h="";return m.forEach((e=>{"Amazon"===e.name&&(f=e.url),"Apple Books"===e.name&&(b=e.url),"Bookshop"===e.name&&(h=e.url)})),` \n      <li class="shop-list__one-card" data-id=${e}>\n        <img class="shop-list__img" src="${n||"./src/images/stopper335@1x.png"}" alt="${u||"No title"}" />\n        <div class="shop-list__text-container">\n          <h3 class="shop-list__title-book">${u||"No title"} </h3>\n          <h4 class="shop-list__category-name">${p||"No category"}</h4>\n          <p class="shop-list__descr ">${g||"No description"}</p>\n          <h4 class="shop-list__author">${r||"No author"}</h4>\n        </div>\n        <ul class='shop-list__links-group'>\n        <li class='shop-list__links'><a href=${f} target="_blank"> <img  src='${t(s)}' srcset="${t(s)} 1x, ${t(a)} 2x" rel="noopener noreferrer nofollow" aria-label="Amazon link"></a></li>\n        <li class='shop-list__links'><a href=${b} target="_blank"> <img  src='${t(i)}' srcset="${t(i)} 1x, ${t(l)} 2x" rel="noopener noreferrer nofollow" aria-label="Apple Books link"'></a></li>\n        <li class='shop-list__links'><a href=${h} target="_blank"> <img  src='${t(c)}' srcset="${t(c)} 1x, ${t(d)} 2x" rel="noopener noreferrer nofollow" aria-label="Amazon link"></a></li>\n        </ul> \n      <div>\n    <button class="btn-trash-box" type="button" data-name="btn-trash" data-id=${e}>\n      <span class="btn-icn-wrap">\n        <svg width="18" height="18">\n          <use href="${t(o)}#trash"></use>\n        </svg>\n      </span>\n    </button>\n  </div>\n  </li>\n    `}));g.cards.innerHTML=n.join("")}(m))}(),g.shopListContainer.addEventListener("click",(function(e){if("use"!==e.target.nodeName)return;const t=e.target.closest(".shop-list__one-card").dataset.id;Object.keys(p).forEach((e=>{p[e].id===t&&delete p[e]})),localStorage.setItem("shopingList",JSON.stringify(p)),e.target.closest(".shop-list__one-card").remove(),g.cards.children.length||(g.cards.classList.add("visually-hidden"),g.container.innerHTML='\n    <div class="shop-list__empty-page">\n    <p class="textEmptyPage">\n      This page is empty, add some books and proceed to order.\n    </p>\n    <img class="imgEmptyPage" src="./images/is-empty@2x.png" alt="" />\n  </div>')}));document.querySelector(".shop-list__cards").addEventListener("click",(async function(e){if(e.target.closest("button")){const t=e.target.closest("button").dataset.id;await u.deleteBook(t),window.location.reload()}const t=e.target.closest("li").dataset.id;await u.deleteBook(t),window.location.reload()}))})),r.register("jrD5E",(function(e,t){e.exports=new URL(r("kyEFX").resolve("8OQ7p"),import.meta.url).toString()})),r.register("79MCx",(function(e,t){e.exports=new URL(r("kyEFX").resolve("836Hl"),import.meta.url).toString()})),r.register("dfaMw",(function(e,t){e.exports=new URL(r("kyEFX").resolve("kCfmF"),import.meta.url).toString()})),r.register("4U7uB",(function(e,t){e.exports=new URL(r("kyEFX").resolve("eGo9w"),import.meta.url).toString()})),r.register("9nBfi",(function(e,t){e.exports=new URL(r("kyEFX").resolve("1NmpU"),import.meta.url).toString()})),r.register("1RUw1",(function(e,t){e.exports=new URL(r("kyEFX").resolve("lf6jX"),import.meta.url).toString()})),r.register("bJ7GI",(function(e,t){e.exports=new URL(r("kyEFX").resolve("9NT6S"),import.meta.url).toString()})),r("kyEFX").register(JSON.parse('{"f4hvY":"listshop.0300b17d.js","8OQ7p":"icons.4c16bf73.svg","836Hl":"amazon@1x.079940f4.png","kCfmF":"amazon@2x.9519639f.png","eGo9w":"book@1x.4bca86b0.png","1NmpU":"book@2x.f258df53.png","lf6jX":"books@1x.d21f8dfc.png","9NT6S":"books@2x.2abcb86b.png","5UbS1":"index.bc36d77b.css","xwhNR":"index.0b5ba918.js"}')),r("195At"),r("jJ57b");var a=r("3bbpN"),i=r("eyjy7"),l=r("jrD5E");document.querySelector(".button-sing-auth-js").addEventListener("click",p);const c=new(0,a.DataFirebase);async function d(){await c.authGoogle(),g.innerHTML="",document.body.classList.remove("scroll-off"),S(),window.location.reload()}const u=c.auth,g=document.querySelector(".modalWindow");function p(){if(localStorage.getItem("tokenResponse"))return localStorage.removeItem("tokenResponse"),localStorage.removeItem("userAvatar"),localStorage.removeItem("email"),localStorage.removeItem("shopingList"),S(),void window.location.reload();g.innerHTML='\n    <div class="modal-bakc">\n    <form class="modal-form-auth"">\n    <div class=\'clousModalAuth\'>&times;</div>\n    <input\n      type="email"\n      name="email"\n      placeholder="email"\n    />\n    <input\n      type="password"\n      name="password"\n      placeholder="password"\n    />\n    <button type="submit">Sign in</button>\n    <div class=\'button-sing-group\'>\n    <p class="button-sign-up">Sign up</p>\n    <p class=\'button-sing\'>Sign in</p>\n    <p class=\'button-google\'>google</p>\n    </div>\n  </form>\n  </div>';const e=g.querySelector(".modal-form-auth"),t=e.querySelector(".button-sign-up"),n=e.querySelector(".button-google"),o=e.querySelector(".clousModalAuth");t.addEventListener("click",f),n.addEventListener("click",d),e.addEventListener("submit",m),o.addEventListener("click",b),g.classList.add("trans-modal"),document.body.classList.add("scroll-off")}async function m(e){e.preventDefault();const t=e.currentTarget.elements.email.value,n=e.currentTarget.elements.password.value;try{const e=await(0,i.signInWithEmailAndPassword)(u,t,n);localStorage.setItem("tokenResponse",e._tokenResponse.idToken),localStorage.setItem("email",t),g.innerHTML="",document.body.classList.remove("scroll-off");const o=await c.getRequest(t);if(o){const e=JSON.stringify(o);localStorage.setItem("shopingList",e)}else localStorage.setItem("shopingList",JSON.stringify({}))}catch(e){console.error("fire.data-error",e),alert(e.message)}S(),window.location.reload()}function f(){g.innerHTML='\n    <div class="modal-bakc">\n    <form class="modal-form-auth">\n    <div class=\'clousModalAuth\'>&times;</div>\n    <input\n      type="email"\n      name="email"\n      placeholder="email"\n    />\n    <input\n      type="password"\n      name="password"\n      placeholder="password"\n    />\n    <input\n      type="password"\n      name="passwordConfirmation"\n      placeholder="password"\n    />\n    <button type="submit">sign up</button>\n    <div class=\'button-sing-group\'>\n    <p class=\'button-sing\'>Sign up</p>\n    <p class="button-sign-in">Sign in</p>\n    <p class=\'button-google\'>google</p>\n    </div>\n  </form>\n  </div>';const e=g.querySelector(".modal-form-auth"),t=e.querySelector(".button-sign-in"),n=e.querySelector(".button-google"),o=e.querySelector(".clousModalAuth");g.classList.add("trans-modal"),t.addEventListener("click",p),e.addEventListener("submit",h),n.addEventListener("click",d),o.addEventListener("click",b),document.body.classList.add("scroll-off")}function b(){g.classList.remove("trans-modal"),g.innerHTML="",document.body.classList.remove("scroll-off")}async function h(e){e.preventDefault();const t=e.currentTarget.elements.email.value,n=e.currentTarget.elements.password.value,o=e.currentTarget.elements.passwordConfirmation.value;if(n&&n===o){console.log(t,n),g.innerHTML="",document.body.classList.remove("scroll-off");try{const e=await(0,i.createUserWithEmailAndPassword)(u,t,n);localStorage.setItem("tokenResponse",e._tokenResponse.idToken),localStorage.setItem("email",t),localStorage.setItem("shopingList",JSON.stringify({}))}catch(e){console.error(e.message),alert(e.message)}}else alert("Check the password");S(),window.location.reload()}const v=document.querySelector(".header-button-nav"),y=document.querySelector(".button-sing-auth-js");function S(){let e="";if(localStorage.getItem("tokenResponse")){const n=localStorage.getItem("userAvatar")?localStorage.getItem("userAvatar"):"https://bootstraptema.ru/snippets/icons/2016/mia/1.png",o=localStorage.getItem("email");e=`<div class='user-auth-zone'>\n        <img\n          src="${n}"\n          alt="user avatar"\n          loading="lazy"\n          class="user-img-auth"\n        />\n      <span class='nik-name'>${o.substring(0,o.indexOf("@"))}</span>\n        <div class='svg-user-auth'>\n        <svg width="23" height="26" fill="#ffffff">\n          <use href="${t(l)}#caret-down"></use>\n        </svg>\n        </div>\n    </div>`,v.classList.remove("header-not-uyth")}else e=`<div class="button-sing-auth-js">\n      <button class="btn-log-out" type="button">\n        Log in<span class="btn-icn-wrap">\n          <svg width="20" height="20">\n            <use href="${t(l)}#arrow-right"></use>\n          </svg>\n        </span>\n      </button>\n    </div>`,v.classList.add("header-not-uyth");y.innerHTML=e}S();const w=document.querySelector(".burger-button-auth"),_=document.querySelector(".burger-button-span"),L=document.querySelector(".modal-burger-menu"),k=document.querySelector(".burger-menu-header");function E(){console.log(localStorage.getItem("tokenResponse")),localStorage.getItem("tokenResponse")?_.innerHTML="Log aut":_.innerHTML="Log in"}k.addEventListener("click",(()=>{L.classList.toggle("modal-burger-menu-off"),k.classList.toggle("active"),document.body.classList.toggle("scroll-off")})),console.log(w),w.addEventListener("click",(function(e){k.classList.toggle("active"),L.classList.toggle("modal-burger-menu-off"),document.body.classList.toggle("scroll-off"),E(),p()})),E(),E(),r("2wbaf"),r("7V6RO");
//# sourceMappingURL=listshop.0300b17d.js.map
